<!-- Only show header and tabs when not on login page -->
<ng-container *ngIf="!router.url.includes('/login')">
  <!-- Header Bar -->
  <div class="header">
    <div class="header-title">
      <img src="assets/images/D4C.jpg" alt="Logo" class="logo" />
      <span class="brand">CNC Digital Twin</span>
      <span class="active-dot"></span>
      <span class="subtitle">Real-time Monitoring Active</span>
    </div>
    <div class="header-user">
      <span class="last-updated">Last Updated<br>{{ lastUpdated }}</span>

      <!-- User button with menu trigger -->
      <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-btn">
        <mat-icon>account_circle</mat-icon>
      </button>

      <!-- Dropdown menu -->
      <mat-menu #userMenu="matMenu">
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <!-- Tabs: Using router navigation -->
  <mat-tab-group *ngIf="!router.url.startsWith('/machine-details')" class="main-tabs" [selectedIndex]="selectedTabIndex" (selectedIndexChange)="onTabChange($event)">
    <mat-tab>
      <ng-template mat-tab-label>
        <span style="color:white">Dashboard</span>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <span style="color:white">Analytics</span>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <span style="color:white">Master Data</span>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <span style="color:white">Reports</span>
      </ng-template>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <span style="color:white">3D Modelling</span>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</ng-container>

<!-- Routed Page -->
<router-outlet></router-outlet>
<ng-container *ngIf="!router.url.includes('/login')">
  <footer class="app-footer">
    All rights reserved by Dyna4cast Technologies @2025
  </footer>
</ng-container>
